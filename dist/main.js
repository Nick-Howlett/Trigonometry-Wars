(()=>{"use strict";var e={585:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=s(464),r=function(){function e(e,t){this.p=e,this.q=t}return e.prototype.len=function(){return Math.sqrt(Math.pow(this.p.x-this.q.x,2)+Math.pow(this.p.y-this.q.y,2))},e.prototype.normalVec=function(){return new n.default({x:0,y:0},{x:-(this.q.y-this.p.y),y:this.q.x-this.p.x})},e.prototype.vectorize=function(){return new n.default(this.p,this.q)},e}();t.default=r},464:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=s(585),r=function(){function e(e,t){this.x=t.x-e.x,this.y=t.y-e.y,this.coords=[this.x,this.y]}return e.prototype.createLine=function(e){return new n.default({x:e.x,y:e.y},{x:e.x+this.x,y:e.y+this.y})},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.scale=function(e){return this.x*=e,this.y*=e,this},e.prototype.normalize=function(){var e=this.magnitude();return this.x/=e,this.y/=e,this},e.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.cross=function(e){return this.x*e.y-this.y*e.x},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e}();t.default=r},218:(e,t,s)=>{function n(e,t){return function(){return e.apply(t,arguments)}}const{toString:r}=Object.prototype,{getPrototypeOf:i}=Object,o=(a=Object.create(null),e=>{const t=r.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())});var a;const c=e=>(e=e.toLowerCase(),t=>o(t)===e),l=e=>t=>typeof t===e,{isArray:h}=Array,u=l("undefined"),d=c("ArrayBuffer"),f=l("string"),p=l("function"),y=l("number"),m=e=>null!==e&&"object"==typeof e,g=e=>{if("object"!==o(e))return!1;const t=i(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},w=c("Date"),v=c("File"),b=c("Blob"),x=c("FileList"),E=c("URLSearchParams");function O(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let n,r;if("object"!=typeof e&&(e=[e]),h(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let o;for(n=0;n<i;n++)o=r[n],t.call(null,e[o],o,e)}}function S(e,t){t=t.toLowerCase();const s=Object.keys(e);let n,r=s.length;for(;r-- >0;)if(n=s[r],t===n.toLowerCase())return n;return null}const T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:s.g,R=e=>!u(e)&&e!==T,A=(L="undefined"!=typeof Uint8Array&&i(Uint8Array),e=>L&&e instanceof L);var L;const C=c("HTMLFormElement"),P=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),N=c("RegExp"),k=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};O(s,((s,r)=>{let i;!1!==(i=t(s,r,e))&&(n[r]=i||s)})),Object.defineProperties(e,n)},j="abcdefghijklmnopqrstuvwxyz",_="0123456789",B={DIGIT:_,ALPHA:j,ALPHA_DIGIT:j+j.toUpperCase()+_},q=c("AsyncFunction");var M={isArray:h,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=o(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:f,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:m,isPlainObject:g,isUndefined:u,isDate:w,isFile:v,isBlob:b,isRegExp:N,isFunction:p,isStream:e=>m(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:A,isFileList:x,forEach:O,merge:function e(){const{caseless:t}=R(this)&&this||{},s={},n=(n,r)=>{const i=t&&S(s,r)||r;g(s[i])&&g(n)?s[i]=e(s[i],n):g(n)?s[i]=e({},n):h(n)?s[i]=n.slice():s[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&O(arguments[e],n);return s},extend:(e,t,s,{allOwnKeys:r}={})=>(O(t,((t,r)=>{s&&p(t)?e[r]=n(t,s):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let r,o,a;const c={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)a=r[o],n&&!n(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==s&&i(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:c,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!y(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:C,hasOwnProperty:P,hasOwnProp:P,reduceDescriptors:k,freezeMethods:e=>{k(e,((t,s)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];p(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))}))},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach((e=>{s[e]=!0}))};return h(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,s){return t.toUpperCase()+s})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:S,global:T,isContextDefined:R,ALPHABET:B,generateString:(e=16,t=B.ALPHA_DIGIT)=>{let s="";const{length:n}=t;for(;e--;)s+=t[Math.random()*n|0];return s},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(m(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const r=h(e)?[]:{};return O(e,((e,t)=>{const i=s(e,n+1);!u(i)&&(r[t]=i)})),t[n]=void 0,r}}return e};return s(e,0)},isAsyncFn:q,isThenable:e=>e&&(m(e)||p(e))&&p(e.then)&&p(e.catch)};function F(e,t,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r)}M.inherits(F,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const U=F.prototype,D={};function I(e){return M.isPlainObject(e)||M.isArray(e)}function z(e){return M.endsWith(e,"[]")?e.slice(0,-2):e}function H(e,t,s){return e?e.concat(t).map((function(e,t){return e=z(e),!s&&t?"["+e+"]":e})).join(s?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{D[e]={value:e}})),Object.defineProperties(F,D),Object.defineProperty(U,"isAxiosError",{value:!0}),F.from=(e,t,s,n,r,i)=>{const o=Object.create(U);return M.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),F.call(o,e.message,t,s,n,r),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const W=M.toFlatObject(M,{},null,(function(e){return/^is[A-Z]/.test(e)}));function J(e,t,s){if(!M.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=M.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!M.isUndefined(t[e])}))).metaTokens,r=s.visitor||l,i=s.dots,o=s.indexes,a=(s.Blob||"undefined"!=typeof Blob&&Blob)&&M.isSpecCompliantForm(t);if(!M.isFunction(r))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(M.isDate(e))return e.toISOString();if(!a&&M.isBlob(e))throw new F("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(e)||M.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,s,r){let a=e;if(e&&!r&&"object"==typeof e)if(M.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(M.isArray(e)&&function(e){return M.isArray(e)&&!e.some(I)}(e)||(M.isFileList(e)||M.endsWith(s,"[]"))&&(a=M.toArray(e)))return s=z(s),a.forEach((function(e,n){!M.isUndefined(e)&&null!==e&&t.append(!0===o?H([s],n,i):null===o?s:s+"[]",c(e))})),!1;return!!I(e)||(t.append(H(r,s,i),c(e)),!1)}const h=[],u=Object.assign(W,{defaultVisitor:l,convertValue:c,isVisitable:I});if(!M.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!M.isUndefined(s)){if(-1!==h.indexOf(s))throw Error("Circular reference detected in "+n.join("."));h.push(s),M.forEach(s,(function(s,i){!0===(!(M.isUndefined(s)||null===s)&&r.call(t,s,M.isString(i)?i.trim():i,n,u))&&e(s,n?n.concat(i):[i])})),h.pop()}}(e),t}function V(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function K(e,t){this._pairs=[],e&&J(e,this,t)}const $=K.prototype;function X(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function G(e,t,s){if(!t)return e;const n=s&&s.encode||X,r=s&&s.serialize;let i;if(i=r?r(t,s):M.isURLSearchParams(t)?t.toString():new K(t,s).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}$.append=function(e,t){this._pairs.push([e,t])},$.toString=function(e){const t=e?function(t){return e.call(this,t,V)}:V;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Y=class{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:K,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ee="undefined"!=typeof window&&"undefined"!=typeof document,te=(se="undefined"!=typeof navigator&&navigator.product,ee&&["ReactNative","NativeScript","NS"].indexOf(se)<0);var se;const ne="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var re={...Object.freeze({__proto__:null,hasBrowserEnv:ee,hasStandardBrowserWebWorkerEnv:ne,hasStandardBrowserEnv:te}),...Z};function ie(e){function t(e,s,n,r){let i=e[r++];const o=Number.isFinite(+i),a=r>=e.length;return i=!i&&M.isArray(n)?n.length:i,a?(M.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!o):(n[i]&&M.isObject(n[i])||(n[i]=[]),t(e,s,n[i],r)&&M.isArray(n[i])&&(n[i]=function(e){const t={},s=Object.keys(e);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],t[i]=e[i];return t}(n[i])),!o)}if(M.isFormData(e)&&M.isFunction(e.entries)){const s={};return M.forEachEntry(e,((e,n)=>{t(function(e){return M.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,s,0)})),s}return null}const oe={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,r=M.isObject(e);if(r&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return n&&n?JSON.stringify(ie(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return J(e,new re.classes.URLSearchParams,Object.assign({visitor:function(e,t,s,n){return re.isNode&&M.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=M.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return J(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),function(e,t,s){if(M.isString(e))try{return(0,JSON.parse)(e),M.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||oe.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&M.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw F.from(e,F.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:re.classes.FormData,Blob:re.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],(e=>{oe.headers[e]={}}));var ae=oe;const ce=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),le=Symbol("internals");function he(e){return e&&String(e).trim().toLowerCase()}function ue(e){return!1===e||null==e?e:M.isArray(e)?e.map(ue):String(e)}function de(e,t,s,n,r){return M.isFunction(n)?n.call(this,t,s):(r&&(t=s),M.isString(t)?M.isString(n)?-1!==t.indexOf(n):M.isRegExp(n)?n.test(t):void 0:void 0)}class fe{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function r(e,t,s){const r=he(t);if(!r)throw new Error("header name must be a non-empty string");const i=M.findKey(n,r);(!i||void 0===n[i]||!0===s||void 0===s&&!1!==n[i])&&(n[i||t]=ue(e))}const i=(e,t)=>M.forEach(e,((e,s)=>r(e,s,t)));return M.isPlainObject(e)||e instanceof this.constructor?i(e,t):M.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let s,n,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),s=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!s||t[s]&&ce[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)})),t})(e),t):null!=e&&r(t,e,s),this}get(e,t){if(e=he(e)){const s=M.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(M.isFunction(t))return t.call(this,e,s);if(M.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=he(e)){const s=M.findKey(this,e);return!(!s||void 0===this[s]||t&&!de(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function r(e){if(e=he(e)){const r=M.findKey(s,e);!r||t&&!de(0,s[r],r,t)||(delete s[r],n=!0)}}return M.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const r=t[s];e&&!de(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,s={};return M.forEach(this,((n,r)=>{const i=M.findKey(s,r);if(i)return t[i]=ue(n),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,s)=>t.toUpperCase()+s))}(r):String(r).trim();o!==r&&delete t[r],t[o]=ue(n),s[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return M.forEach(this,((s,n)=>{null!=s&&!1!==s&&(t[n]=e&&M.isArray(s)?s.join(", "):s)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach((e=>s.set(e))),s}static accessor(e){const t=(this[le]=this[le]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=he(e);t[n]||(function(e,t){const s=M.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+s,{value:function(e,s,r){return this[n].call(this,t,e,s,r)},configurable:!0})}))}(s,e),t[n]=!0)}return M.isArray(e)?e.forEach(n):n(e),this}}fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),M.reduceDescriptors(fe.prototype,(({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}})),M.freezeMethods(fe);var pe=fe;function ye(e,t){const s=this||ae,n=t||s,r=pe.from(n.headers);let i=n.data;return M.forEach(e,(function(e){i=e.call(s,i,r.normalize(),t?t.status:void 0)})),r.normalize(),i}function me(e){return!(!e||!e.__CANCEL__)}function ge(e,t,s){F.call(this,null==e?"canceled":e,F.ERR_CANCELED,t,s),this.name="CanceledError"}M.inherits(ge,F,{__CANCEL__:!0});var we=re.hasStandardBrowserEnv?{write(e,t,s,n,r,i){const o=[e+"="+encodeURIComponent(t)];M.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),M.isString(n)&&o.push("path="+n),M.isString(r)&&o.push("domain="+r),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ve(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var be=re.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let s;function n(s){let n=s;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return s=n(window.location.href),function(e){const t=M.isString(e)?n(e):e;return t.protocol===s.protocol&&t.host===s.host}}():function(){return!0};function xe(e,t){let s=0;const n=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let r,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=n[o];r||(r=c),s[i]=a,n[i]=c;let h=o,u=0;for(;h!==i;)u+=s[h++],h%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-r<t)return;const d=l&&c-l;return d?Math.round(1e3*u/d):void 0}}(50,250);return r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-s,c=n(a);s=i;const l={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:r};l[t?"download":"upload"]=!0,e(l)}}const Ee={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,s){let n=e.data;const r=pe.from(e.headers).normalize();let i,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(M.isFormData(n))if(re.hasStandardBrowserEnv||re.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if(!1!==(o=r.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...t].join("; "))}let h=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",s=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+s))}const u=ve(e.baseURL,e.url);function d(){if(!h)return;const n=pe.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders());!function(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new F("Request failed with status code "+s.status,[F.ERR_BAD_REQUEST,F.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}((function(e){t(e),l()}),(function(e){s(e),l()}),{data:a&&"text"!==a&&"json"!==a?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h}),h=null}if(h.open(e.method.toUpperCase(),G(u,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=d:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(d)},h.onabort=function(){h&&(s(new F("Request aborted",F.ECONNABORTED,e,h)),h=null)},h.onerror=function(){s(new F("Network Error",F.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),s(new F(t,n.clarifyTimeoutError?F.ETIMEDOUT:F.ECONNABORTED,e,h)),h=null},re.hasStandardBrowserEnv&&(c&&M.isFunction(c)&&(c=c(e)),c||!1!==c&&be(u))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&we.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===n&&r.setContentType(null),"setRequestHeader"in h&&M.forEach(r.toJSON(),(function(e,t){h.setRequestHeader(t,e)})),M.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),a&&"json"!==a&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",xe(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",xe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{h&&(s(!t||t.type?new ge(null,e,h):t),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);f&&-1===re.protocols.indexOf(f)?s(new F("Unsupported protocol "+f+":",F.ERR_BAD_REQUEST,e)):h.send(n||null)}))}};M.forEach(Ee,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Oe=e=>`- ${e}`,Se=e=>M.isFunction(e)||null===e||!1===e;var Te=e=>{e=M.isArray(e)?e:[e];const{length:t}=e;let s,n;const r={};for(let i=0;i<t;i++){let t;if(s=e[i],n=s,!Se(s)&&(n=Ee[(t=String(s)).toLowerCase()],void 0===n))throw new F(`Unknown adapter '${t}'`);if(n)break;r[t||"#"+i]=n}if(!n){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new F("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Oe).join("\n"):" "+Oe(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function Re(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ge(null,e)}function Ae(e){return Re(e),e.headers=pe.from(e.headers),e.data=ye.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Te(e.adapter||ae.adapter)(e).then((function(t){return Re(e),t.data=ye.call(e,e.transformResponse,t),t.headers=pe.from(t.headers),t}),(function(t){return me(t)||(Re(e),t&&t.response&&(t.response.data=ye.call(e,e.transformResponse,t.response),t.response.headers=pe.from(t.response.headers))),Promise.reject(t)}))}const Le=e=>e instanceof pe?e.toJSON():e;function Ce(e,t){t=t||{};const s={};function n(e,t,s){return M.isPlainObject(e)&&M.isPlainObject(t)?M.merge.call({caseless:s},e,t):M.isPlainObject(t)?M.merge({},t):M.isArray(t)?t.slice():t}function r(e,t,s){return M.isUndefined(t)?M.isUndefined(e)?void 0:n(void 0,e,s):n(e,t,s)}function i(e,t){if(!M.isUndefined(t))return n(void 0,t)}function o(e,t){return M.isUndefined(t)?M.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(s,r,i){return i in t?n(s,r):i in e?n(void 0,s):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>r(Le(e),Le(t),!0)};return M.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=c[n]||r,o=i(e[n],t[n],n);M.isUndefined(o)&&i!==a||(s[n]=o)})),s}const Pe={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Pe[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));const Ne={};Pe.transitional=function(e,t,s){function n(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,r,i)=>{if(!1===e)throw new F(n(r," has been removed"+(t?" in "+t:"")),F.ERR_DEPRECATED);return t&&!Ne[r]&&(Ne[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,r,i)}};var ke={assertOptions:function(e,t,s){if("object"!=typeof e)throw new F("options must be an object",F.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const i=n[r],o=t[i];if(o){const t=e[i],s=void 0===t||o(t,i,e);if(!0!==s)throw new F("option "+i+" must be "+s,F.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new F("Unknown option "+i,F.ERR_BAD_OPTION)}},validators:Pe};const je=ke.validators;class _e{constructor(e){this.defaults=e,this.interceptors={request:new Y,response:new Y}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ce(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:r}=t;void 0!==s&&ke.assertOptions(s,{silentJSONParsing:je.transitional(je.boolean),forcedJSONParsing:je.transitional(je.boolean),clarifyTimeoutError:je.transitional(je.boolean)},!1),null!=n&&(M.isFunction(n)?t.paramsSerializer={serialize:n}:ke.assertOptions(n,{encode:je.function,serialize:je.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&M.merge(r.common,r[t.method]);r&&M.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=pe.concat(i,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let h,u=0;if(!a){const e=[Ae.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),h=e.length,l=Promise.resolve(t);u<h;)l=l.then(e[u++],e[u++]);return l}h=o.length;let d=t;for(u=0;u<h;){const e=o[u++],t=o[u++];try{d=e(d)}catch(e){t.call(this,e);break}}try{l=Ae.call(this,d)}catch(e){return Promise.reject(e)}for(u=0,h=c.length;u<h;)l=l.then(c[u++],c[u++]);return l}getUri(e){return G(ve((e=Ce(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}M.forEach(["delete","get","head","options"],(function(e){_e.prototype[e]=function(t,s){return this.request(Ce(s||{},{method:e,url:t,data:(s||{}).data}))}})),M.forEach(["post","put","patch"],(function(e){function t(t){return function(s,n,r){return this.request(Ce(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}_e.prototype[e]=t(),_e.prototype[e+"Form"]=t(!0)}));var Be=_e;class qe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const s=this;this.promise.then((e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{s.subscribe(e),t=e})).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e((function(e,n,r){s.reason||(s.reason=new ge(e,n,r),t(s.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new qe((function(t){e=t})),cancel:e}}}var Me=qe;const Fe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fe).forEach((([e,t])=>{Fe[t]=e}));var Ue=Fe;const De=function e(t){const s=new Be(t),r=n(Be.prototype.request,s);return M.extend(r,Be.prototype,s,{allOwnKeys:!0}),M.extend(r,s,null,{allOwnKeys:!0}),r.create=function(s){return e(Ce(t,s))},r}(ae);De.Axios=Be,De.CanceledError=ge,De.CancelToken=Me,De.isCancel=me,De.VERSION="1.6.2",De.toFormData=J,De.AxiosError=F,De.Cancel=De.CanceledError,De.all=function(e){return Promise.all(e)},De.spread=function(e){return function(t){return e.apply(null,t)}},De.isAxiosError=function(e){return M.isObject(e)&&!0===e.isAxiosError},De.mergeConfig=Ce,De.AxiosHeaders=pe,De.formToJSON=e=>ie(M.isHTMLForm(e)?new FormData(e):e),De.getAdapter=Te,De.HttpStatusCode=Ue,De.default=De,e.exports=De}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e=s(464);const t=(e,t)=>{const s=e.x-t.x,n=e.y-t.y;return Math.atan2(n,s)},n=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r=(t,s)=>new e.default({x:0,y:0},{x:Math.cos(t)*s,y:Math.sin(t)*s}),i=(...e)=>{let t=[];return e.forEach((e=>t=t.concat(e.lines))),t},o=e=>Math.floor(Math.random()*e),a=class{constructor(e,t,s){this.pos=e,this.vel=t,this.direc=s}accelerate(e){this.vel=e}decelerate(){this.vel=0}rotate(e){this.direc=e}move(e){const t=r(this.direc,this.vel);this.pos.x+=t.x,this.pos.y+=t.y;const s=[];for(let n=0;n<e.length;n++)this.is_collided(e[n])&&(this.pos.x-=t.x,this.pos.y-=t.y,s.push(e[n]));return s}};var c=s(585);const l=(e,t)=>e.x===t.x&&e.y===t.y,h=(t,s,n)=>{const r=t.vectorize(),i=new e.default(s,t.p),o=r.dot(r),a=2*i.dot(r);let c=a*a-4*o*(i.dot(i)-n*n);if(c>0){c=Math.sqrt(c);let e=(-a-c)/(2*o),t=(-a+c)/(2*o);return e>=0&&e<=1||t>=0&&t<=1}return!1},u=(t,s)=>{const n=new e.default(t.q,t.p),r=new e.default(s.q,s.p),i=new e.default(s.p,t.p),o=i.cross(n),a=n.cross(r);if(0!==o||0!==a){if(0===a)return!1;{const e=o/a,t=i.cross(r)/a;return t>=0&&t<=1&&e>=0&&e<=1&&t}}return l(t.p,s.p)||l(t.p,s.q)||l(t.q,s.p)||l(t.q,s.q)||t.p.x-s.p.x<0&&t.p.x-s.q.x<0&&t.q.x-s.p.x<0&&t.q.x-s.q.x<0||t.p.y-s.p.y<0&&t.p.y-s.q.y<0&&t.q.y-s.p.y<0&&t.q.y-s.q.y<0?.1:void 0},d=class extends a{constructor(e,t,s){super(e,t,s),this.radius=10,this.points=[{x:-10,y:4},{x:0,y:-22},{x:10,y:4}],this.charge=0,this.calculateLines()}is_collided(e){if(e.pos){for(let t=0;t<this.lines.length;t++)if(h(this.lines[t],e.pos,e.radius))return!0}else for(let t=0;t<this.lines.length;t++)if(u(e,this.lines[t]))return!0;return!1}chargeLaser(e){e>1&&(e=1),this.charge=e}charged(){return 1===this.charge}discharge(){this.charge=0}calculateLines(){const t=this.pos.x,s=this.pos.y,n=this.points.map((e=>{const n=((e,t)=>{const s={};return s.x=e.x*Math.cos(t)-e.y*Math.sin(t),s.y=e.y*Math.cos(t)+e.x*Math.sin(t),s})(e,this.direc-Math.PI/2);return n.x+=t,n.y+=s,n}));n.unshift({x:t,y:s}),n.push({x:t,y:s}),this.lines=[];for(let e=0;e<n.length-1;e++)this.lines.push(new c.default(n[e],n[e+1]));const r=new e.default(n[1],n[2]),i=new e.default(n[3],n[2]);this.chargeLines=[r.scale(this.charge).createLine(n[1]),i.scale(this.charge).createLine(n[3])]}draw(e){e.save(),e.fillStyle="White",e.beginPath(),e.moveTo(this.pos.x,this.pos.y),this.lines.forEach((t=>{e.lineTo(t.q.x,t.q.y)})),e.fill(),e.restore(),e.save(),e.strokeStyle="#1aff1a",e.shadowColor="#1aff1a",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=4,e.lineWidth=3,this.chargeLines.forEach((t=>{e.beginPath(),e.moveTo(t.p.x,t.p.y),e.lineTo(t.q.x,t.q.y),e.stroke()})),e.restore()}},f=class{constructor(){this.pos={x:0,y:0},this.size=10}updatePos(e,t){this.pos={x:e,y:t}}draw(e){e.save(),e.strokeStyle="white",e.translate(this.pos.x,this.pos.y),e.beginPath(),e.lineTo(0,-this.size),e.lineTo(0,0),e.lineTo(0,this.size),e.lineTo(0,0),e.lineTo(-this.size,0),e.lineTo(0,0),e.lineTo(this.size,0),e.stroke(),e.restore()}},p=class{constructor(e,t){this.pos=e,this.duration=20,this.theta=t,this.reflections=4;const s=r(t,-100);this.vecs=[new c.default(this.pos,{x:this.pos.x+s.x,y:this.pos.y+s.y})]}is_finished(){return this.duration<=0}fade(){this.duration--}reflect(e,t){if(0===this.reflections)return void(this.duration=Math.min(this.duration,12));const s=e.vectorize(),n=t.normalVec().normalize(),r=s.subtract(n.scale(2*s.dot(n))),i=this.vecs[this.vecs.length-1],o=r.createLine(i.q),a=r.normalize();return o.p.x+=a.x,o.p.y+=a.y,this.vecs.push(o),this.reflections--,1}is_collidable(){return this.duration>this.duration-(this.duration-5)}grow(e){const t=this.vecs[this.vecs.length-1],s=t.p;return this.vecs[this.vecs.length-1]=t.vectorize().scale(e).createLine(s),this.vecs[this.vecs.length-1]}draw(e){e.save(),e.beginPath(),e.lineWidth=3,e.strokeStyle="#1aff1a",e.shadowColor="#1aff1a",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=5,this.duration<=10&&(e.globalAlpha=1-(10-this.duration)/10),this.vecs.forEach((t=>{e.moveTo(t.p.x,t.p.y),e.lineTo(t.q.x,t.q.y)})),e.stroke(),e.restore()}},y=class extends a{constructor(e,t,s,n){super(t,s,n),this.id=e,this.radius=10,setInterval((()=>this.vel+=.5),5e3)}is_collided(e){return!!h(e,this.pos,this.radius)}reroute(t,s,r){let i,o;t.forEach((t=>{i?i.subtract(t.vectorize().normalize()):i=t.vectorize().normalize();const s=new e.default(t.q,t.p);o?o.subtract(s.normalize()):o=s.normalize()}));const a={x:this.pos.x+i.x,y:this.pos.y+i.y},c={x:this.pos.x+o.x,y:this.pos.y+o.y};n(a,s)>n(c,s)?this.pos=c:this.pos=a}draw(e){e.beginPath(),e.fillStyle="#11e023",e.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),e.fill()}},m=function(){const e=[];return e.push(setInterval(this.tick.bind(this),20)),e.push(setInterval((()=>{const e=((e,t)=>{switch(["top","bottom","left","right"][o(4)]){case"top":return{x:o(e),y:0};case"bottom":return{x:o(e),y:t};case"left":return{x:0,y:o(t)};case"right":return{x:e,y:o(t)}}})(...this.dims);this.entities.push(new y(this.eid,e,this.enemySpeed,t(e,this.player.pos)))}),1e3)),e.push(setInterval((()=>this.enemySpeed+=.2),4e3)),e.push(setInterval((()=>this.displayScore=this.score),100)),e},g=function(){this.canvas.addEventListener("mousemove",(e=>{const t=this.canvas.getBoundingClientRect();this.cursor.updatePos(e.clientX-t.left,e.clientY-t.top)})),this.clickListener=document.addEventListener("mousedown",(e=>{this.keys.Mouse=!0})),this.mouseUpListener=document.addEventListener("mouseup",(e=>{this.keys.Mouse=!1})),document.addEventListener("keydown",(e=>{this.keys[e.code]=!0})),document.addEventListener("keyup",(e=>{this.keys[e.code]=!1}))};class w{constructor(e){this.pos=e,this.points=this.createPoints(),this.lines=this.createLines()}createPoints(){const e=this.pos.x,t=this.pos.y;return[{x:e,y:t-25},{x:e-25,y:t},{x:e,y:t+25},{x:e+25,y:t}]}createLines(){const e=[];for(let t=0;t<this.points.length-1;t++)e.push(new c.default(this.points[t],this.points[t+1]));return e.push(new c.default(this.points[this.points.length-1],this.points[0])),e}draw(e){e.save(),e.fillStyle="#D0D0D0",e.beginPath(),e.moveTo(this.lines[0].p.x,this.lines[0].p.y),this.lines.forEach((t=>{e.lineTo(t.q.x,t.q.y)})),e.fill(),e.restore()}}class v{constructor(e,t,s,n){this.pos={x:e.x,y:e.y},this.direction=t,this.length=15*Math.random(),this.vel=5*Math.random()+3,this.age=0,this.timeToLive=s||20,this.opacity=1,this.thickness=n||1}finished(){return this.age>this.timeToLive}move(){this.pos.x+=Math.cos(this.direction)*this.vel,this.pos.y+=Math.sin(this.direction)*this.vel}lifecycle(){this.age++,this.vel-=.1,this.opacity=(this.timeToLive-this.age)/this.timeToLive}draw(e){e.save(),e.globalAlpha=this.opacity,e.strokeStyle="#1aff1a",e.shadowColor="#1aff1a",e.lineWidth=this.thickness,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=5,e.beginPath(),e.moveTo(this.pos.x,this.pos.y),e.lineTo(this.pos.x+Math.cos(this.direction)*this.length,this.pos.y+Math.sin(this.direction)*this.length),e.stroke(),e.restore()}}function b(e,t){const s=[];if(t)for(let n=0;n<5;n++)s.push(new v(e,t-Math.PI/2+Math.random()*Math.PI,10,2));else for(let t=0;t<30;t++)s.push(new v(e,Math.random()*Math.PI*2));return s}const x=class{constructor(e,t,s,n,r,i){this.finishOverlay=s,this.scoreOverlay=n,this.canvas=e,this.ctx=t,this.sounds=r,this.is_muted=i,this.dims=[e.width,e.height],this.edges=[new c.default({x:0,y:0},{x:e.width,y:0}),new c.default({x:0,y:0},{x:0,y:e.width}),new c.default({x:e.width,y:0},{x:e.width,y:e.height}),new c.default({x:0,y:e.height},{x:e.width,y:e.height})],this.player=new d({x:e.width/2,y:e.height/2},0,0),this.cursor=new f,this.score=0,this.displayScore=0,this.laser=null,this.enemySpeed=1,this.entities=[this.player],this.obstacles=[new w({x:this.canvas.width/4,y:this.canvas.height/4}),new w({x:3*this.canvas.width/4,y:this.canvas.height/4}),new w({x:this.canvas.width/4,y:3*this.canvas.height/4}),new w({x:3*this.canvas.width/4,y:3*this.canvas.height/4})],this.particles=[],this.keys={}}start(){this.intervals=m.bind(this)(),g.bind(this)()}mute(){this.is_muted=!0}unmute(){this.is_muted=!1}gameOver(){this.intervals.forEach((e=>clearInterval(e))),this.canvas.className="inactive",this.finishOverlay.className="overlay game-over";const e=document.getElementById("score");e.innerHTML="";const t=document.createTextNode(`Your Score was: ${this.score}`);e.appendChild(t)}check_collisions(){const e=i(this.player,...this.obstacles);let s,n;if(this.laser&&this.laser.is_collidable()){let t=this.laser.vecs[this.laser.vecs.length-1];[s,n]=((e,...t)=>{let s=10,n=null;for(let r=0;r<t.length;r++){const i=t[r],o=u(e,i);"number"==typeof o&&o<s&&(s=o,n=i)}return[s,n]})(t,...this.edges,...e)}if(n){const e=this.laser.grow(s);this.laser.reflect(e,n)&&(this.particles=this.particles.concat(b(e.q,t(e.p,e.q))))}this.entities.slice(1).forEach((e=>{if(this.laser){let t=this.laser.pos;this.laser.vecs.forEach(((s,n)=>{h(s,e.pos,e.radius)&&(this.particles=this.particles.concat(b(e.pos)),delete this.entities[this.entities.indexOf(e)],this.score+=100+100*n*2),t=s}))}this.player.is_collided(e)&&this.gameOver()}))}render(){this.scoreOverlay.innerHTML=`${this.displayScore}`,this.ctx.clearRect(0,0,this.dims[0],this.dims[1]),this.laser&&this.laser.draw(this.ctx),this.cursor.draw(this.ctx),this.entities.forEach((e=>e.draw(this.ctx))),this.obstacles.forEach((e=>e.draw(this.ctx))),this.particles.forEach((e=>e.draw(this.ctx)))}check_keys(){if(this.keys.KeyW?this.player.accelerate(-3):this.player.decelerate(),this.chargeInterval){if(!this.keys.Space&&!this.keys.Mouse){if(this.sounds.charge.pause(),clearInterval(this.chargeInterval),this.chargeInterval=null,this.player.charged()){const e=t(this.player.pos,this.cursor.pos),s=r(e,-30);this.laser=new p({x:this.player.pos.x+s.x,y:this.player.pos.y+s.y},e),this.is_muted||(this.sounds.fire.load(),this.sounds.fire.play())}this.player.discharge()}}else if(this.keys.Space||this.keys.Mouse){const e=1e3;let t=0;this.is_muted||(this.sounds.charge.load(),this.sounds.charge.play()),this.chargeInterval=setInterval((()=>{this.player.chargeLaser(t/e),t+=10}),10)}}tick(){this.check_keys(),this.laser&&(this.laser.grow(3),this.laser.fade(),this.laser.is_finished()&&(this.laser=null)),this.entities.forEach((e=>{e===this.player?e.rotate(t(this.player.pos,this.cursor.pos)):e.rotate(t(this.player.pos,e.pos));const s=i(...this.obstacles),n=e.move(s);n.length>0&&e!==this.player&&e.reroute(n,this.player.pos,this.ctx)})),this.particles.forEach((e=>{e.move(),e.lifecycle(),e.finished()&&delete this.particles[this.particles.indexOf(e)]})),this.player.calculateLines(),this.check_collisions(),this.score++,this.render()}},E=s(218);document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("game-canvas"),t=document.getElementById("background-canvas");S(t);const s=e.getContext("2d"),n=Array.from(document.getElementsByClassName("overlay")),r=document.getElementById("game-over"),i=document.getElementById("score-overlay"),o=document.getElementById("scoreboard"),a=document.querySelectorAll(".scoreboard"),c=document.getElementById("submit-form"),l=document.getElementById("score-submit"),h=document.getElementById("highscores"),u=document.querySelectorAll(".score-submit"),d=document.getElementById("player-name"),f=document.querySelector(".form-submit"),p=Array.from(document.getElementsByClassName("play-button")),y=document.querySelector(".top-left"),m={};let g,w=!1;m.fire=document.getElementById("fire"),m.fire.volume=.4,m.charge=document.getElementById("charge");let v,b=!0;E.get("https://trigonometry-scores.herokuapp.com/api/scores").then((e=>O(e,h,v,w))),p.forEach((t=>{t.addEventListener("click",(()=>{g||(g=new AudioContext,g.createMediaElementSource(m.fire).connect(g.destination),g.createMediaElementSource(m.charge).connect(g.destination)),v=new x(e,s,r,i,m,b),v.start(),n.forEach((e=>e.className="overlay hidden")),e.className="active",w=!1,f.value="Submit Score"}))})),a.forEach((e=>{e.addEventListener("click",(()=>{o.classList="overlay",r.classList="overlay hidden",l.classList="overlay hidden"}))})),u.forEach((e=>{e.addEventListener("click",(()=>{l.classList="overlay",r.classList="overlay hidden",o.classList="overlay hidden"}))})),f.addEventListener("click",(e=>{e.preventDefault(),c.reportValidity()&&(E.post("https://trigonometry-scores.herokuapp.com/api/scores",{name:d.value,score:v.score}).then((()=>{f.value="Score Submitted",w=!0,E.get("https://trigonometry-scores.herokuapp.com/api/scores").then((e=>O(e,h,v,w)))})).catch((e=>{f.value="Score Upload Fail"})),f.value="Submitting Score...")}));const T=document.getElementById("mute"),R=document.getElementById("sound");document.addEventListener("keypress",(e=>{"m"!==e.key&&"M"!==e.key||A()})),y.addEventListener("click",(e=>A()));const A=()=>{b?(R.classList="",T.classList="hidden",b=!1,v&&v.unmute()):(R.classList="hidden",T.classList="",b=!0,v&&v.mute())}}));const O=(e,t,s,n)=>{const r=e.data;s&&(!n||s.score<r[r.length-1].score)&&r.push({name:"Your Score",score:s.score}),r.sort(((e,t)=>t.score-e.score)),t.innerHTML="",r.forEach(((e,s)=>{const n=document.createElement("div"),r=document.createElement("span");r.appendChild(document.createTextNode(`${s+1}. ${e.name}`));const i=document.createElement("span");i.appendChild(document.createTextNode(e.score)),n.appendChild(r),n.appendChild(i),t.appendChild(n)}))},S=e=>{const t=e.width,s=e.height,n=e.getContext("2d");n.fillRect(0,0,t,s),n.strokeStyle="#00ff00",n.lineWidth=.1;for(let t=0;t<e.width;t+=Math.floor(e.width/12))n.moveTo(t,0),n.lineTo(t,s),n.stroke();for(let s=0;s<e.height;s+=Math.floor(e.height/8))n.moveTo(0,s),n.lineTo(t,s),n.stroke()}})()})();
//# sourceMappingURL=main.js.map